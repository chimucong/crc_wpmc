//
// Created by test on 7/18/18.
//

#ifndef CRC_WPMC_CRC32Q_H
#define CRC_WPMC_CRC32Q_H

#include "Crc32Base.h"

//% CRC32Q 32 31 24 22 16 14 8 7 5 3 1 0
//a = [1 1 0 1 0 1 0 1 1 0 0 0 0 0 1 0 1 0 0 0 0 0 1 0 1 0 0 0 0 0 0 1 1]; %0xD5828281
//b = [repelem(0,64),1];
//[q,r] =  gfdeconv(b,a);
//q
//%  0     1(31)     0     0     0     1 (27)    1(26)     0
//% 1(24)     1(23)     1(22)     1(21)     1(20)     1(19)     1(18)     0
//% 1(16)     1(15)     1(14)     1(13)     1(12)     1(11)     1(10)     1(9)
//% 0         1(7)     1(6)     1(5)     1(4)     1(3)     1(2)     1(1)
//% 1(0)
class Crc32Q : public Crc32Base {
public:
    Crc32Q() : Crc32Base(0xD5828281) {}

    uint32_t mod(uint32_t p) {
        p = p ^ (p << 31) ^ (p << 27) ^ (p << 26)
            ^ (p << 24) ^ (p << 23) ^ (p << 22) ^ (p << 21) ^ (p << 20) ^ (p << 19) ^ (p << 18)
            ^ (p << 16) ^ (p << 15) ^ (p << 14) ^ (p << 13) ^ (p << 12) ^ (p << 11) ^ (p << 10) ^ (p << 9)
            ^ (p << 7) ^ (p << 6) ^ (p << 5) ^ (p << 4) ^ (p << 3) ^ (p << 2) ^ (p << 1);
        p = p ^ (p >> 31) ^ (p >> 24) ^ (p >> 22) ^ (p >> 16) ^ (p >> 14) ^ (p >> 8) ^ (p >> 7) ^ (p >> 5) ^ (p >> 3) ^
            (p >> 1);
        return p;

    }

};


#endif //CRC_WPMC_CRC32Q_H
